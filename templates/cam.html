{% extends 'base.html' %} {% block content %}
{% load static %}
<div class='deshbord-container'>
  <nav class='nav-container'>
    <div class='sub'>
    <a href='home'><img src={% static 'image/—Pngtree—product analysis_2849807.png' %} alt="logo" class='logo'/></a>
    <h1><span class='app-name'>Production</span> <span class='half'>Analyser</span></h1>
    </div>
      <div class='sub'>
    <a href="{% url 'logout' %}"><button class='btn'>Logout</button></a>
    </div>
  </nav>
  <div class='dashboard-sub-container'>
    <nav class='side-bar'>
      <a href='home'><i class="fa-solid fa-house bar"></i></a>
      <a href='dashboard'><i class="fa-solid fa-desktop bar"></i></a>
      <a href='cycle'> <i class="fa-solid fa-bicycle bar"></i></a>
      <a href='report'> <i class="fa-solid fa-file bar"></i></a>
      <a href='upload'><i class="fas fa-upload bar"></i></a>
      <a href='submited'><i class="fas fa-file-import bar"></i></a>
      <a href='livecam'><i class="fas fa-camera bar"></i></a>
  </nav>
  <div class='content-container'>
    <div class='header-container'>
        <h1>Live Camera</h1>
        <select id="camera-selector" class='input-time'>
            <option value="right">Right Camera</option>
            <option value="left">Left Camera</option>
          </select>
    </div>
    <div class='image-cam-container'>
    <img id="right-cam" src='https://b679-122-165-150-231.in.ngrok.io/video_stream/RightCam' alt='right-cam' class='cam-image'/>
    <img id="left-cam" src='https://b679-122-165-150-231.in.ngrok.io/video_stream/LeftCam' alt='right-cam' class='cam-image'/>
  </div>
    </div>
</div>
</div>
<script>
    const rightCam = document.getElementById("right-cam");
    const leftCam = document.getElementById("left-cam");
    const activityStatus = document.getElementById("activity-status");
    const cameraSelector = document.getElementById("camera-selector");

    {% comment %} error in fetch data {% endcomment %}

    const eventSource = new EventSource("https://b679-122-165-150-231.in.ngrok.io/activity");

    eventSource.onmessage = function(event) {
      console.log("data", event.data);
    };
    
    eventSource.onerror = function(event) {
      console.error("error", event.target.readyState);
    };

    cameraSelector.addEventListener("change", () => {
      const selectedCamera = cameraSelector.value;
      if (selectedCamera === "right") {
        rightCam.style.display = "block";
        leftCam.style.display = "none";
      } else {
        rightCam.style.display = "none";
        leftCam.style.display = "block";
      }
    });

</script>
{% endblock %}